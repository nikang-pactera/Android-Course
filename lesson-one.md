# Android Studio 安装以及运行

## 1.下载
首先下载Android studio安装包，可以从 [http://www.android-studio.org/](http://www.android-studio.org/) 下载最新版本，这里采用3.5.2版本进行演示，安装包大小718 MB.


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842919-77571654-0c33-456e-82bb-4857243481b7.png#align=left&display=inline&height=760&margin=%5Bobject%20Object%5D&originHeight=760&originWidth=1224&size=0&status=done&style=none&width=1224)


## 2.下载后进行安装
将按照下列步骤进行：  
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842862-7eee7fe6-d350-4fbb-b04c-45c55c3139ea.png#align=left&display=inline&height=485&margin=%5Bobject%20Object%5D&originHeight=485&originWidth=623&size=0&status=done&style=none&width=623)
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842914-cd37318c-9a31-42c7-a422-28a1b9b234ac.png#align=left&display=inline&height=485&margin=%5Bobject%20Object%5D&originHeight=485&originWidth=623&size=0&status=done&style=none&width=623)

下面一步是安装路径的选择，
D:\android\android studio
文件夹自己新建就好
（说三遍，图中有误！！！！）

![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842959-efd6cd91-b984-4625-ac4a-d6a17cca055c.png#align=left&display=inline&height=407&margin=%5Bobject%20Object%5D&originHeight=407&originWidth=518&size=0&status=done&style=none&width=518)
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842947-eaf250bc-8bea-4eca-8761-76dffe0a8033.png#align=left&display=inline&height=485&margin=%5Bobject%20Object%5D&originHeight=485&originWidth=623&size=0&status=done&style=none&width=623)


到此基础部分已经完成。

## 3.下面一定要逐步完成，一步一步仔细操作：
点选第二个


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842875-9b4eedcd-c15c-455e-8162-bc16a1f6e392.png#align=left&display=inline&height=197&margin=%5Bobject%20Object%5D&originHeight=197&originWidth=457&size=0&status=done&style=none&width=457)  


然后会有各种提示，下一步到这里
安装选这个
>**custom**

后续可以更改安装位置，否则，只能装在C盘
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136843096-435b02f6-b1c0-4d72-a76a-c897d8e61b05.png#align=left&display=inline&height=742&margin=%5Bobject%20Object%5D&originHeight=742&originWidth=984&size=0&status=done&style=none&width=984)

选择主题风格：（自行选择）

![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842957-84232540-da91-42fe-af4d-d206d0604c15.png#align=left&display=inline&height=742&margin=%5Bobject%20Object%5D&originHeight=742&originWidth=984&size=0&status=done&style=none&width=984)

>`下方安装路径如果需要更改的话
一定要改为没有标点符号，（空格之类千万不要有，另外，中文不能出现！！！！！本文所有路径，不能出现中文！！！！）`

勾选内容参考图中
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842881-bdd17523-ecf0-4cd0-b07d-e9063857e7e1.png#align=left&display=inline&height=742&margin=%5Bobject%20Object%5D&originHeight=742&originWidth=984&size=0&status=done&style=none&width=984)

内存的选择，不要低于2G（2048MB）
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842951-b2c76d42-6a33-4363-a270-46c596de665e.png#align=left&display=inline&height=742&margin=%5Bobject%20Object%5D&originHeight=742&originWidth=984&size=0&status=done&style=none&width=984)


到此下一步，开始疯狂跑安装：
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842946-26c12d76-ac78-4c8d-b92c-2ebdf90016fd.png#align=left&display=inline&height=742&margin=%5Bobject%20Object%5D&originHeight=742&originWidth=984&size=0&status=done&style=none&width=984)
选择完成！


下图！


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842934-ad6330a5-20a3-475a-b288-b67fb76a53ba.png#align=left&display=inline&height=621&margin=%5Bobject%20Object%5D&originHeight=621&originWidth=834&size=0&status=done&style=none&width=834)


## 4.开始演示第一个hello world程序！
点击上图的start a new balabala…
演示为空白案例，不做其他模板展示！
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842983-f9d6bed0-2d1e-42fc-8d9d-8e46abc8c6fc.png#align=left&display=inline&height=902&margin=%5Bobject%20Object%5D&originHeight=902&originWidth=1127&size=0&status=done&style=none&width=1127)

项目名称，域名，语言，API等级，根据需要选择就好
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842928-29524883-ff45-4ff6-852b-da80873e2457.png#align=left&display=inline&height=902&margin=%5Bobject%20Object%5D&originHeight=902&originWidth=1127&size=0&status=done&style=none&width=1127)


第一次安装会进行环境配置，会进行gradle
耐心等待就好
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842958-4808b7ce-4540-4814-a2de-2e5ddece1542.png#align=left&display=inline&height=972&margin=%5Bobject%20Object%5D&originHeight=972&originWidth=1734&size=0&status=done&style=none&width=1734)


分析完成之后。点击右上角的锤子，然后点击三角形
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842965-b01edddf-1444-47b5-ba63-e5b34c07012e.png#align=left&display=inline&height=972&margin=%5Bobject%20Object%5D&originHeight=972&originWidth=1734&size=0&status=done&style=none&width=1734)
由于第一次安装，需要配置一个新的模拟器


创建一个新虚拟设备


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842947-7121d4c6-1177-479e-af13-f0a1acb23758.png#align=left&display=inline&height=606&margin=%5Bobject%20Object%5D&originHeight=606&originWidth=782&size=0&status=done&style=none&width=782)


选择想要的模板类型，强烈建议图中的两个，其他的，，，好丑哈哈
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842910-2866ad20-77db-43d6-9351-c4a505e8b83a.png#align=left&display=inline&height=851&margin=%5Bobject%20Object%5D&originHeight=851&originWidth=1252&size=0&status=done&style=none&width=1252)


继续选择图片素材
需要下载1个G左右！
下面按照图片进行操作即可！
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842911-76bc69a0-3a72-4b44-b073-6f597e0eefa2.png#align=left&display=inline&height=851&margin=%5Bobject%20Object%5D&originHeight=851&originWidth=1252&size=0&status=done&style=none&width=1252)
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136843072-0db52517-c3a0-4af6-89d1-ce29045c0bd1.png#align=left&display=inline&height=851&margin=%5Bobject%20Object%5D&originHeight=851&originWidth=1002&size=0&status=done&style=none&width=1002)
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842974-cb355d0c-d933-4bda-af58-05677780ac80.png#align=left&display=inline&height=851&margin=%5Bobject%20Object%5D&originHeight=851&originWidth=1002&size=0&status=done&style=none&width=1002)
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842974-6d4d0937-a4e1-4ad1-a517-8942422bde54.png#align=left&display=inline&height=851&margin=%5Bobject%20Object%5D&originHeight=851&originWidth=1002&size=0&status=done&style=none&width=1002)
完成！


下面一步改名无关紧要直接完成即可！
此时前面那个选择虚拟设备画面已经有了一个设备，进行勾选！
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136843019-7b34e0f2-1161-4e70-a1ce-6ef5c04aea7d.png#align=left&display=inline&height=609&margin=%5Bobject%20Object%5D&originHeight=609&originWidth=782&size=0&status=done&style=none&width=782)


看见这个画面


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842972-fb5fe7af-f68a-4234-86c5-aab833493ce2.png#align=left&display=inline&height=864&margin=%5Bobject%20Object%5D&originHeight=864&originWidth=467&size=0&status=done&style=none&width=467)


默认即为helloworld ！第一个程序完成!
不用任何操作！


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136842933-b1709a99-34e9-4be9-93d4-be28eb553ce1.png#align=left&display=inline&height=864&margin=%5Bobject%20Object%5D&originHeight=864&originWidth=467&size=0&status=done&style=none&width=467)


# JDK下载与安装教程

## ******JDK下载步骤：******
1.自行百度jdk下载，找到oracle官网；进入网站后，点击 Accept License Agreement 后，选择与自己电脑操作系统匹配的型号，我的操作系统为Windows 64位，所以选择“jdk-8u191-windows-x64.exe”，如图所示；
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137328662-aec0e844-cdd4-4543-affb-e1cbcc5b3d81.png#align=left&display=inline&height=438&margin=%5Bobject%20Object%5D&originHeight=438&originWidth=578&size=0&status=done&style=none&width=578)
<br>
下载成功然后进行安装
## ******JDK安装步骤：******

1. 双击进行安装，如果不更改任何配置，直接下一步傻瓜式安装到结束。

（本人使用时更改了安装位置）
<br>
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137328624-b9f7f4a4-e7d3-4dcc-8e6a-01822e2bda7a.png#align=left&display=inline&height=373&margin=%5Bobject%20Object%5D&originHeight=350&originWidth=459&size=0&status=done&style=none&width=489)


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137328660-62c53525-1f53-44f6-9bf5-cfa532ae703e.png#align=left&display=inline&height=376&margin=%5Bobject%20Object%5D&originHeight=352&originWidth=461&size=0&status=done&style=none&width=492)


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137328621-4c7eb9c6-06c3-4742-b9d3-807f303189ad.png#align=left&display=inline&height=375&margin=%5Bobject%20Object%5D&originHeight=354&originWidth=465&size=0&status=done&style=none&width=493)


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137328604-fffa09b8-5dcb-47ef-a0b9-86f1b1739dfe.png#align=left&display=inline&height=267&margin=%5Bobject%20Object%5D&originHeight=263&originWidth=485&size=0&status=done&style=none&width=492)


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137328638-456d7865-7bd5-4a4c-814b-312279f6c4cd.png#align=left&display=inline&height=376&margin=%5Bobject%20Object%5D&originHeight=373&originWidth=490&size=0&status=done&style=none&width=494)


2.安装后，查看是否安装成功；进入cmd窗口，输入java -version


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137328628-c944490a-5510-40d3-87c8-be868936e607.png#align=left&display=inline&height=83&margin=%5Bobject%20Object%5D&originHeight=83&originWidth=553&size=0&status=done&style=none&width=553)

## ******JDK环境变量配置：******
步骤：计算机→属性→高级系统设置→高级→环境变量
### ******1.新建系统变量JAVA_HOME******
变量名：JAVA_HOME；变量值：D:\Program Files\Java\jdk1.8.0_191（我的）
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137328603-3b61d4be-943a-4a09-a355-e7d34e154362.png#align=left&display=inline&height=138&margin=%5Bobject%20Object%5D&originHeight=138&originWidth=532&size=0&status=done&style=none&width=532)
## ******2.编辑系统变量Path******
Windows10 电脑，新建变量值：%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;
Windows7 电脑，在变量值最后输入%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;注意用;号分隔


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137328593-fd0c5ad2-cb75-45a7-8a78-43b5d8af83ae.png#align=left&display=inline&height=430&margin=%5Bobject%20Object%5D&originHeight=430&originWidth=438&size=0&status=done&style=none&width=438)
## ******3.新建系统变量CLASSPATH变量******
变量名：CLASSPATH  变量值：%JAVA_HOME%\lib;%JAVA_HOME%\lib\tools.jar
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137328580-6e13de62-25a0-48df-83f2-4a41b35d7fad.png#align=left&display=inline&height=143&margin=%5Bobject%20Object%5D&originHeight=143&originWidth=553&size=0&status=done&style=none&width=553)


# Android Studio Gradle 配置

**先说明原因：
gradle资源包是通过android studio 远程访问安卓的gradle仓库进行下载的
难免会出现网络不佳，以及被墙的情况（并不是所有人都会遇到）**


## 1.现象说明
gradle失败会显示这个界面
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136534831-23082d77-9318-4612-bfea-8c617b17c293.png#align=left&display=inline&height=165&margin=%5Bobject%20Object%5D&originHeight=165&originWidth=762&size=0&status=done&style=none&width=762)


## 2.首先确认自己的gradle版本


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136534902-53204309-f2cf-44bb-bb9a-bb322c5d6d98.png#align=left&display=inline&height=431&margin=%5Bobject%20Object%5D&originHeight=431&originWidth=1584&size=0&status=done&style=none&width=1584)


## 3.我们打开Android Studio默认下载Gradle的位置：
上图中的Url
进行查看下载的Gradle文件，记住版本号，如下图所示：
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136534904-f33e311c-9525-4c09-906c-8f68e5aa632d.png#align=left&display=inline&height=334&margin=%5Bobject%20Object%5D&originHeight=334&originWidth=1045&size=0&status=done&style=none&width=1045)
不成功的原因即是上图压缩包没有下载成功
首先，点击进入这个网站：[https://services.gradle.org/distributions/](https://services.gradle.org/distributions/)
或者直接打开上面的Url即可（去掉反斜杠即可）
找到和自己本版相同的Gradle-all.zip文件找到自己版本进行下载
下载完成之后
将上图所有的下载的文件都删掉
然后直接把我们自己下载的zip文件粘贴进去
重启Android Studio
正常来说就会发现已经可以正常使用了。


## 4.如果还是不行，进行下面操作：
在 project 的 build.gradle中修改如下：
```
allprojects {
    repositories {
        //jcenter()
        maven{ url 'http://maven.aliyun.com/nexus/content/groups/public/'}
    }
}
```


## 特别说明
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606136552241-5a878bfb-cc5c-4396-babe-7a99783229d8.png#align=left&display=inline&height=176&margin=%5Bobject%20Object%5D&originHeight=176&originWidth=821&size=0&status=done&style=none&width=821)
>`路径不能有中文 、符号 、空格（尤其是电脑账户名包含这些）`


# 新建项目

**新建项目（含Module创建）**

## （1）创建项目
进入AS，左上角单击File->New->New Project,如下：


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948527-6afe05d5-ceda-4932-b2af-c8dfc0e4f46e.png#align=left&display=inline&height=282&margin=%5Bobject%20Object%5D&originHeight=282&originWidth=533&size=0&status=done&style=none&width=533)


进入以下界面：
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948527-8b77c473-9df0-444f-ad3f-bc69966457b4.png#align=left&display=inline&height=743&margin=%5Bobject%20Object%5D&originHeight=741&originWidth=1052&size=0&status=done&style=none&width=1055)
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948537-1b9fd1df-8841-412e-89ee-d2643c903747.png#align=left&display=inline&height=664&margin=%5Bobject%20Object%5D&originHeight=739&originWidth=1067&size=0&status=done&style=none&width=958)
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948577-c79ac25f-45ac-4ac9-8d0b-a6479b536535.png#align=left&display=inline&height=564&margin=%5Bobject%20Object%5D&originHeight=661&originWidth=1031&size=0&status=done&style=none&width=879)
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948580-25f25db7-d4e6-4e18-9705-820ac03eda73.png#align=left&display=inline&height=755&margin=%5Bobject%20Object%5D&originHeight=738&originWidth=1062&size=0&status=done&style=none&width=1087)
完成。


## （2）主界面介绍

![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948618-fd136099-8666-488e-a1e1-078774b55f51.png#align=left&display=inline&height=727&margin=%5Bobject%20Object%5D&originHeight=683&originWidth=1216&size=0&status=done&style=none&width=1294)
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948583-b25b6b5d-fd06-4471-87e9-09a64f57d217.png#align=left&display=inline&height=369&margin=%5Bobject%20Object%5D&originHeight=369&originWidth=312&size=0&status=done&style=none&width=312)


## （3）预览

![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948589-f814cd12-0147-4c51-aaab-b0796555c8a5.png#align=left&display=inline&height=890&margin=%5Bobject%20Object%5D&originHeight=890&originWidth=1915&size=0&status=done&style=none&width=1915)
 
## （4）创建Module
对于中大型项目AS提供了Module（即模块），主要便于项目分层以及分离逻辑，使项目逻辑更加清晰也便于项目维护。创建模块如下：


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948586-0e33f755-693c-4210-a737-17e0a6401dd2.png#align=left&display=inline&height=311&margin=%5Bobject%20Object%5D&originHeight=311&originWidth=672&size=0&status=done&style=none&width=672)


进入以下页面： 
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948585-b4e0c503-16ff-4fbc-9e29-24d06c99f982.png#align=left&display=inline&height=725&margin=%5Bobject%20Object%5D&originHeight=725&originWidth=1064&size=0&status=done&style=none&width=1064)


进入下一步，完成创建后如下： 


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948591-2d615c30-3446-4c6c-aa0e-67edcc0505e0.png#align=left&display=inline&height=414&margin=%5Bobject%20Object%5D&originHeight=414&originWidth=430&size=0&status=done&style=none&width=430)


关于Module的创建及使用可以参考 [另一篇进阶文章](http://www.cnblogs.com/xiaoshubao/p/5599073.html)。


## 二、代码混淆
AS项目由Gradle构建及管理项目，应用相关的很多信息都可以在这里设置，如下：


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948605-af08c5e4-4da2-4948-a8bc-b215d4dbf625.png#align=left&display=inline&height=778&margin=%5Bobject%20Object%5D&originHeight=778&originWidth=1223&size=0&status=done&style=none&width=1223)


AS中进行代码混淆需要在build.gradle文件和proguard-rules.pro文件中进行设置（可以通过jd-gui工具对比混淆前后效果）：
 
 
### （1）build.gradle文件
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948579-9da9f92c-b979-4bd5-ad45-cb1b0ce1a109.png#align=left&display=inline&height=146&margin=%5Bobject%20Object%5D&originHeight=146&originWidth=786&size=0&status=done&style=none&width=786)
 
minifyEnabled:表示是否开启混淆，默认为false
proguardFiles：混淆配置文件，一般就采用项目中默认的proguard-rules.pro文件。
 
### （2）proguard-rules.pro文件

![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948587-b1e86bd5-4eab-4b27-8354-9c46e0c8c7c4.png#align=left&display=inline&height=236&margin=%5Bobject%20Object%5D&originHeight=236&originWidth=1168&size=0&status=done&style=none&width=1168)


混淆设置，具体可参考[progurad官网](http://proguard.sourceforge.net/)。
 
 
注意图中红框部分，因为所有jar包（此处已JAR包混淆举例，APP混淆与此类似）都要求有对外接口（没有对外接口的模块一般也没什么意义），有多种种方式设置对外接口类：
 
#### a:-keep public class *，例如：
 
```java
-keep public class * {
public protected *;
}
```
 
#### b:如上图所示。
 
因为一个模块一般有很多类文件，混淆时我们希望除对外接口类的其他所有类文件的类名也进行混淆，那么就可以单独创建一个基类或接口，让对外的接口类继承该基类或接口。
 
#### c:-keep public class XXX,特定类不混淆，例如：
 
```java
-keep public class xiaoshubao.player.UserLogin{
public protected *;
}
```


### 常用调试功能及应用分析相关
#### （1）创建模拟器（创建过程省略）

![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948584-8d923b3b-9543-4018-b691-aa5b92ffb175.png#align=left&display=inline&height=168&margin=%5Bobject%20Object%5D&originHeight=168&originWidth=855&size=0&status=done&style=none&width=855)


#### （2）运行模拟器

![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948606-ca334657-1eff-4612-8d78-00de660a6a44.png#align=left&display=inline&height=999&margin=%5Bobject%20Object%5D&originHeight=999&originWidth=567&size=0&status=done&style=none&width=567)
 
#### （3）应用分析相关

![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948611-4e22a14e-7007-4d12-8ccf-2375287d0b1d.png#align=left&display=inline&height=298&margin=%5Bobject%20Object%5D&originHeight=328&originWidth=1869&size=0&status=done&style=none&width=1699)
 
 
1.日志输出，如上图所示。
2.内存分析
 
 
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948627-70fc0c90-389f-4f24-b91d-3426732e6fcc.png#align=left&display=inline&height=310&margin=%5Bobject%20Object%5D&originHeight=346&originWidth=1899&size=0&status=done&style=none&width=1700)


#### a:
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948613-400f3370-9c52-4586-b870-759fe2c00bcc.png#align=left&display=inline&height=298&margin=%5Bobject%20Object%5D&originHeight=330&originWidth=1887&size=0&status=done&style=none&width=1702)


#### b:
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948594-ddb497ef-625d-43f2-b364-49fef3851dc5.png#align=left&display=inline&height=982&margin=%5Bobject%20Object%5D&originHeight=982&originWidth=1430&size=0&status=done&style=none&width=1430)


#### c：
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948596-7fe84f7c-1143-44e8-9127-be45d951aa24.png#align=left&display=inline&height=235&margin=%5Bobject%20Object%5D&originHeight=309&originWidth=1887&size=0&status=done&style=none&width=1437)


#### d:内存信息采集
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606137948606-f6494ce7-72d9-4db0-9936-9564d07256bc.png#align=left&display=inline&height=820&margin=%5Bobject%20Object%5D&originHeight=975&originWidth=1657&size=0&status=done&style=none&width=1393)


### apk简单编译
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606983379773-ded91105-a978-4628-b361-226cebcb1b31.png#align=left&display=inline&height=337&margin=%5Bobject%20Object%5D&name=%E5%9B%BE%E7%89%871.png&originHeight=337&originWidth=407&size=30061&status=done&style=none&width=407)


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606983381049-02974e4d-9d2d-4cb0-9ab2-d31870ad9818.png#align=left&display=inline&height=281&margin=%5Bobject%20Object%5D&name=%E5%9B%BE%E7%89%872.png&originHeight=281&originWidth=285&size=35161&status=done&style=none&width=285)


# 布局

## 1. 布局类型
在`Android`中，共有2类、7种布局方式，分别是：


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606983535390-0330b0c5-5974-4526-be0f-d5027359708b.png#align=left&display=inline&height=444&margin=%5Bobject%20Object%5D&name=%E5%9B%BE%E7%89%873.png&originHeight=444&originWidth=895&size=73471&status=done&style=none&width=895)


## 2. 布局介绍

- 具体介绍

![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606373485235-0bb4448b-3cb7-48b4-b2f7-7518df609c0a.png#align=left&display=inline&height=638&margin=%5Bobject%20Object%5D&name=2.png&originHeight=638&originWidth=900&size=96846&status=done&style=none&width=900)


本文主要介绍传统的5大布局，关于约束布局`（ConstraintLayout）`具体[点击查看文章](https://segmentfault.com/a/1190000014876944)

---

## 3. 布局属性

- `Android`的布局属性通过 `XML`配置
- 下面，主要讲解布局公有属性 & 特有属性

### 3.1 公有属性
即 5种布局都具备下述属性

- `layout_width` 、`layout_height`
- `layout_margin`+方位
- `padding` +方位
- `gravity`
- `layout_gravity`
> `layout_gravity` 一般作用于 LeanerLayout 和 FrameLayout，但此处为了与 `gravity`对比

![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606373490052-0f786c7d-1065-405e-a8e4-e2cd2bcb0cf8.png#align=left&display=inline&height=1881&margin=%5Bobject%20Object%5D&name=3.png&originHeight=1881&originWidth=980&size=137671&status=done&style=none&width=980)


示意图


`layout_gravity`：多用于自身控件相对于父控件的位置
`gravity`：多用于设置父控件里的子控件的位置
### 3.2 特有属性

- 具体介绍如下

![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606373496009-5eaa6977-78b6-4ea1-8ad9-340068232441.png#align=left&display=inline&height=950&margin=%5Bobject%20Object%5D&name=4.png&originHeight=950&originWidth=1220&size=171904&status=done&style=none&width=1220)


示意图


### 3.3 特别注意

- 5个布局元素可相互嵌套使用，从而实现各种不同的效果
- 关于 线性布局（LinearLayout）的权重属性layout_weight请看[文章](http://mobile.51cto.com/abased-375428.htm)


# 常用基本控件
## 1.TextView
看到Android中的TextView, 我不禁的想到了iOS开发中的UILabel。从字面意思上看，TextView就是文本视图，只是用来显示文字的。在iOS中就叫做标签，即为UILabel。要想在Activity中显示TextView, 我们需要在相应的布局文件，也就是Activity对应的layout.xml文件去添加相应的控件标签。这些xml标签可以确定控件的位置，大小，颜色等属性。下方是在Activity中显示一个TextView。布局代码如下：
```xml
<TextView
          android:id="@+id/name_text_view"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:gravity="center"
          android:textSize="30sp"
          android:textColor="#be0e0a"
          android:text="My name is ZeluLi"/>
```


标签<TextView/>代表着我们要在Activity中添加一个个TextView, 标签中可以设置一些属性。

1. android:id属性代表着TextView的Id,也就是TextView的唯一标示，在java代码中我们可以通过findViewById()方法来通过Id获取控件。上述控件的唯一id为name_text_view。

2. android:layout_width属性代表着控件的宽度，该属性的值是match_parent, 表示该控件的宽度与父视图的宽度相同。

3. android:layout_height属性代表着控件的高度，该属性的值是wrap_content,表示控件的高度根据内容的高度进行改变。

4. android:gravity属性代表着TextView中文字对齐方式，有多种方式，我们在此选的是center,居中显示。

5. .android:textSize属性代表着TextView中文字的型号，也就是文字的大小。

6. android:textColor属性设置的是TextView中文字的颜色，属性值是16进制的色值。

7. android:text属性就是用来设置TextView显示的值的。


我们如何在Java类，也就是Activity中获取上述控件呢，下方的代码就是使用findViewById()方法通过id获取上述控件，并获取TextView中的值以及设置TextView中的值。具体代码如下。

```java
TextView myTextView = (TextView) findViewById(R.id.name_text_view);
String myText = myTextView.getText().toString();
myTextView.setText(myText + "  Add");
```
经过上面的属性的设置，运行工程，你会在Activity中看到如下效果：


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606374106090-1a5b9835-2278-42ca-be4c-c20dcd90312c.png#align=left&display=inline&height=264&margin=%5Bobject%20Object%5D&name=1.png&originHeight=264&originWidth=974&size=49846&status=done&style=none&width=974)


## 2.Button
在Android中的按钮就叫Button, 而在iOS中则叫UIButton。其两者的用法极为相似。还是和上面类似，我们需要在Activity对应的布局文件layout.xml中添加一个Button, 具体的xml代码如下所示。<Button/>标签就是代表着Button, 其中的属性和属性值就不做过多的赘述了，上面已经提到了。

```xml
<Button
        android:id="@+id/click_button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="点我"/>
```
在Activity的类中也是使用findViewById来通过Id获取该按钮，获取按钮后我们需要给按钮绑定点击事件。也就是点击按钮要做的事情，下方给出了两中方式，一种是块的形式，一种是委托代理的形式。


(1).接口回调的形式绑定点击事件
```java
Button button = (Button) findViewById(R.id.click_button);
button.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        //点击按钮要做的事情
    }
});
```


(2)委托代理
```java
button.setOnClickListener(this);
//重写委托回调的方法
/**
  * Called when a view has been clicked.
  *
  * @param v The view that was clicked.
  */
@Override
public void onClick(View v) {
    switch (v.getId()){
        case R.id.click_button:
            //点击按钮后要做的事情
            break;
        default:
            break;
    }
}
```
经过上面的步骤就会在TextView下面添加了一个按钮，运行效果如下所示


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606374112348-89a65f12-a0e0-4e66-94ad-aa8949cc45d6.png#align=left&display=inline&height=342&margin=%5Bobject%20Object%5D&name=2.png&originHeight=342&originWidth=992&size=43536&status=done&style=none&width=992)


## 3.EditText
接下来要为Activity添加一个输入框，在Android中输入框的类型和标签都是EditText。iOS中的输入框就是UITextField了，其实两者用法类似，其功能都是接收用户输入的数据的。下方是其xml布局方式.
```xml
<EditText
          android:id="@+id/edit_text"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:hint="placeHoder: type something here"
          android:maxLines="3"/>
```
上方EditText标签中比之前多了两个属性：
(1).android:hint属性后边是一个字符串，其实就是用来占位用的字符串，功能是提示用户该输入框是干嘛的，在iOS开发中叫做Placeholder。


(2).android:macLines 用来设置输入框的最大行数。
在Activity中获取EditText对象，也是通过Id方式，下方代码是获取通过id实例化EditText对象，并获取其中的文本在Toast上显示。
```java
EditText myEditText = (EditText) findViewById(R.id.edit_text);
String inputText = myEditText.getText().toString();
Toast.makeText(MainActivity.this, inputText, Toast.LENGTH_SHORT).show();
```
输入框如下所示：
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606374119264-0c9651c2-aa34-455a-a18e-ae28ad77ea2c.png#align=left&display=inline&height=408&margin=%5Bobject%20Object%5D&name=3.png&originHeight=408&originWidth=982&size=63407&status=done&style=none&width=982)


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606374130513-993fa2b6-852d-4d07-aca5-51b237095fb8.png#align=left&display=inline&height=442&margin=%5Bobject%20Object%5D&name=4.png&originHeight=442&originWidth=980&size=42213&status=done&style=none&width=980)


## 4.AlterDialog(警告框)
Toast用来显示提示内容，而AlterDialog是警告框，上面可以有一些控件，比如按钮等。AlterDialog其实就是iOS中的AlterView（在iOS8后有增加了UIAlterController）。下面的代码是初始化AlterDialog并且进行显示的代码，下方的代码是放在点击按钮所触发的方法当中。
（1）AlterDialog通过AlterDialog的Builder进行创建，在创建的时候会指定该AlterDialog在那个Activity上进行显示。
（2）通过setTitle方法给AlterDialog设置标题，通过setMessage给AlterDialog设置内容。
（3）setCancelable()方法，我们在这儿设置的时false，表示弹出的AlterDialog在用户点击返回键是不消失，该值默认是true。
（4）setPositiveButton()方法是设置点击“确定”按钮时的事件, setNegativeButton是设置点击“取消”按钮的事件。通过Toast来展示事件的点击。

```java
AlertDialog.Builder alterDialog = new AlertDialog.Builder(MainActivity.this);
alterDialog.setTitle("提示框");
alterDialog.setMessage("提示内容");
alterDialog.setCancelable(false);
alterDialog.setPositiveButton("好的", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        Toast.makeText(MainActivity.this, "好的", Toast.LENGTH_SHORT).show();
    }
});
alterDialog.setNegativeButton("取消", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        Toast.makeText(MainActivity.this, "取消", Toast.LENGTH_SHORT).show();
    }
});
alterDialog.show();
```
下面就是上面AlterDialog显示后的效果。


![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606374137149-d98cc0fc-5656-449d-88cc-f7c1b2604aaf.png#align=left&display=inline&height=338&margin=%5Bobject%20Object%5D&name=5.png&originHeight=338&originWidth=872&size=16863&status=done&style=none&width=872)


## 5.ProgressBar(进度条)
进度条，就是平时下载东西常见到表示下载进度的控件。ProgressBar和iOS中的UIProgressView类似，用法也是非常类似的。首先需要在Activity对应的Xml文件中对ProgressBar进行布局和样式的设定。下方是ProgressBar的布局和样式。

```xml
<ProgressBar
         android:id="@+id/my_progress_bar"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         style="?android:attr/progressBarStyleHorizontal"
         android:max="200"/>
```
我们可以通过android:max来设定ProgressBar的进度最大值，而style可以给ProgressBar设定不同的样式。ProgressBar有多种样式，可以根据不同的场景来选择不同的样式，下方是可选样式。
![](https://cdn.nlark.com/yuque/0/2020/png/2863967/1606374142932-a9347288-a9ca-4005-9952-47457eed259d.png#align=left&display=inline&height=538&margin=%5Bobject%20Object%5D&name=6.png&originHeight=538&originWidth=916&size=155524&status=done&style=none&width=916)


在xml中配置好ProgressBar之后就可以在代码中通过ID获取，对ProgressBar进行一系列的操作了。下方的代码也是放在按钮的点击事件中，每点击一次进度条的进度就增加10，直到增到最大值时ProgressBar就会变成不可见。变为不可见后，接着就会把进度设置成0。

```java
ProgressBar myProgressBar = (ProgressBar) findViewById(R.id.my_progress_bar);
myProgressBar.setProgress(myProgressBar.getProgress()+10);
if (myProgressBar.getProgress() == myProgressBar.getMax()) {
    myProgressBar.setVisibility(View.GONE);
    myProgressBar.setProgress(0);
} else {
    myProgressBar.setVisibility(View.VISIBLE);
}
```


# RecyclerView

### 优点


* view复用：recycle
* 灵活实现 一个类就可以实现 listview，gridview 效果
* 自定义 item间隔：通过ItemDecoration，item动画：ItemAnimator
* 可以实现多种炫酷瀑布流布局 这是 listView 和 gridView 不能实现的


### 缺点


* 代码量大 代码量相对于lv，rv要多
* 没有item点击监听器 需要自定义回调接口（点击，长按等）


### 代码以及说明
因为 recyclerView 的 adapter 原生的代码量比较大，而且经常可能会漏一部分内容，所以这里引用第三方的 adapter，需要在 `build.gradle` 中引用
```
    implementation 'com.kevin:delegationadapter:2.0.2'
    // 扩展库，扩展支持了item click、item long click、databinding、load more
    implementation 'com.kevin:delegationadapter-extras:2.0.2'
```

下面就是源码了：


```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_recycler_view);

        RecyclerView recyclerView = findViewById(R.id.recyclerView);
        LinearLayoutManager layoutManager = new LinearLayoutManager(this);
        //设置布局管理器
        recyclerView.setLayoutManager(layoutManager);
        //设置为垂直布局，这也是默认的
        layoutManager.setOrientation(RecyclerView.VERTICAL);

        DelegationAdapter delegationAdapter = new DelegationAdapter();
        // 向Adapter中注册委托Adapter
//        delegationAdapter.addDelegate(new CompanyAdapterDelegate());
        delegationAdapter.addDelegate(new CNCompanyAdapterDelegate());
        delegationAdapter.addDelegate(new USCompanyAdapterDelegate());

        //设置Adapter
        recyclerView.setAdapter(delegationAdapter);
        //设置增加或删除条目的动画
        recyclerView.setItemAnimator(new DefaultItemAnimator());

        List<String> companies = new ArrayList<>();
        companies.add("🇨🇳 百度");
        companies.add("🇨🇳 阿里");
        companies.add("🇨🇳 腾讯");
        companies.add("🇺🇸 Google");
        companies.add("🇺🇸 Facebook");
        companies.add("🇺🇸 Microsoft");

        // 置数据
        delegationAdapter.setDataItems(companies);
    }
```
```
public class CNCompanyAdapterDelegate extends AdapterDelegate<String, CNCompanyAdapterDelegate.ViewHolder> {

    @Override
    public boolean isForViewType(String item, int position) {
        return item.contains("🇨🇳");
    }

    @Override
    public ViewHolder onCreateViewHolder(ViewGroup parent) {
        View view = LayoutInflater.from(parent.getContext()).inflate(android.R.layout.simple_list_item_1, parent, false);
        ViewHolder holder = new ViewHolder(view);
        return holder;
    }

    @Override
    public void onBindViewHolder(final ViewHolder holder, final int position, final String item) {
        holder.tvName.setText(item);
        holder.tvName.setTextColor(Color.RED);
    }

    static class ViewHolder extends RecyclerView.ViewHolder {
        public TextView tvName;

        public ViewHolder(View itemView) {
            super(itemView);
            tvName = itemView.findViewById(android.R.id.text1);
        }
    }
}
```
```
public class USCompanyAdapterDelegate extends AdapterDelegate<String, USCompanyAdapterDelegate.ViewHolder> {

    @Override
    public boolean isForViewType(String item, int position) {
        return item.contains("🇺🇸");
    }

    @Override
    public ViewHolder onCreateViewHolder(ViewGroup parent) {
        View view = LayoutInflater.from(parent.getContext()).inflate(android.R.layout.simple_list_item_1, parent, false);
        ViewHolder holder = new ViewHolder(view);
        return holder;
    }

    @Override
    public void onBindViewHolder(final ViewHolder holder, final int position, final String item) {
        holder.tvName.setText(item);
        holder.tvName.setTextColor(Color.BLUE);
    }

    static class ViewHolder extends RecyclerView.ViewHolder {
        public TextView tvName;

        public ViewHolder(View itemView) {
            super(itemView);
            tvName = itemView.findViewById(android.R.id.text1);
        }
    }
}
```

# ViewPager
## PagerAdapter的使用
我们先来介绍最普通的PagerAdapter，如果想使用这个PagerAdapter需要重写下面的四个方法： 当然，这只是官方建议，实际上我们只需重写getCount()和isViewFromObject()就可以了~


getCount():获得viewpager中有多少个view
destroyItem():移除一个给定位置的页面。适配器有责任从容器中删除这个视图。 这是为了确保在finishUpdate(viewGroup)返回时视图能够被移除。
而另外两个方法则是涉及到一个key的东东：


instantiateItem(): ①将给定位置的view添加到ViewGroup(容器)中,创建并显示出来 ②返回一个代表新增页面的Object(key),通常都是直接返回view本身就可以了,当然你也可以 自定义自己的key,但是key和每个view要一一对应的关系
isViewFromObject(): 判断instantiateItem(ViewGroup, int)函数所返回来的Key与一个页面视图是否是 代表的同一个视图(即它俩是否是对应的，对应的表示同一个View),通常我们直接写 return view == object!
使用示例1：最简单用法
运行效果图：
![](https://cdn.nlark.com/yuque/0/2020/jpeg/2863967/1606984696217-1558f67d-6c0f-4c45-9618-8f93312bcb91.jpeg#align=left&display=inline&height=384&margin=%5Bobject%20Object%5D&name=68392114.jpg&originHeight=384&originWidth=216&size=122519&status=done&style=none&width=216)
关键部分代码：


好的，代码写起来也是非常简单的：首先是每个View的布局，一式三份，另外两个View一样：


view_one.xml：
```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="第一个Page"
    android:textColor="#000000"
    android:textSize="18sp"
    android:textStyle="bold" />
```
MyPagerAdapter.java：
```java
public class MyPagerAdapter extends PagerAdapter {
    private ArrayList viewLists;
    public MyPagerAdapter() {
    }

    public MyPagerAdapter(ArrayList<View> viewLists) {
        super();
        this.viewLists = viewLists;
    }

    @Override
    public int getCount() {
        return viewLists.size();
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == object;
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        container.addView(viewLists.get(position));
        return viewLists.get(position);
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        container.removeView(viewLists.get(position));
    }
}
```
接着到Activity了，和以前学的ListView非常类似：


OneActivity.java：
```java
public class OneActivity extends AppCompatActivity{
    private ViewPager vpager_one;
    private ArrayList<View> aList;
    private MyPagerAdapter mAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_one);
        vpager_one = (ViewPager) findViewById(R.id.vpager_one);

        aList = new ArrayList<View>();
        LayoutInflater li = getLayoutInflater();
        aList.add(li.inflate(R.layout.view_one,null,false));
        aList.add(li.inflate(R.layout.view_two,null,false));
        aList.add(li.inflate(R.layout.view_three,null,false));
        mAdapter = new MyPagerAdapter(aList);
        vpager_one.setAdapter(mAdapter);
    }
}
```
# 多语言适配

```java
public class MainActivity extends AppCompatActivity {
    ImageButton btn_settings;
    AlertDialog dialog;
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
       //读取SharedPreferences数据，初始化语言设置
        setLanguage();
        getSupportActionBar().hide();
        setContentView(R.layout.activity_main);
        btn_settings = (ImageButton) findViewById(R.id.btn_settings);
        //点击设置按钮进入语言设置
        btn_settings.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                //创建单选框
                final AlertDialog.Builder builder = new
                        AlertDialog.Builder(MainActivity.this);
                builder.setSingleChoiceItems(new String[]{"Auto", "简体中文"},
                        getSharedPreferences("language", Context.MODE_PRIVATE).getInt("language",0),
                        new DialogInterface.OnClickListener() {
                            //点击单选框某一项以后
                            public void onClick(DialogInterface dialogInterface, int i) {
                                //将选中项存入SharedPreferences，以便重启应用后读取设置
                                SharedPreferences preferences = getSharedPreferences("language", Context.MODE_PRIVATE);
                                SharedPreferences.Editor editor = preferences.edit();
                                editor.putInt("language",i);
                                editor.apply();
                                dialog.dismiss();Intent intent = new Intent(MainActivity.this, MainActivity.class);
                                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                startActivity(intent);
                                /* 重新在新的任务栈开启新应用
                                Intent intent = new Intent(MainActivity.this, MainActivity.class);
                                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
                                startActivity(intent);
                                android.os.Process.killProcess(android.os.Process.myPid()); */
                            }
                        });
                dialog = builder.create();
                dialog.show();
            }
        });
    }
    private void setLanguage() {
        //读取SharedPreferences数据，默认选中第一项
        SharedPreferences preferences = getSharedPreferences("language", Context.MODE_PRIVATE);
        int language = preferences.getInt("language", 0);
        //根据读取到的数据，进行设置
        Resources resources = getResources();
        DisplayMetrics displayMetrics = resources.getDisplayMetrics();
        Configuration configuration = resources.getConfiguration();
        switch (language){
            case 0:
                configuration.setLocale(Locale.getDefault());
                break;
           case 1:
                configuration.setLocale( Locale.CHINESE);
                break;
            default:
                break;
        }
        resources.updateConfiguration(configuration,displayMetrics);
    }
} 
```
# Intent 相关

Intent 跳转页面，最常见的就是跳转显示意图的使用，跳转时可以传值，后面的 activity 可以接收，后面的 activity 关闭的时候，也可以将值返回到前一个 activity 中。

跳转页面不需要后面 activity 传值的时候，只需要使用 `startActivity(Intent intent)` 就可以了，如果有接收后面一个 activity 传值的需求，则需要使用 `startActivityForResult(intent, requestCode)`。

下面是源码：
```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_intent);

        textView = findViewById(R.id.textView);

        findViewById(R.id.button1).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                textView.setText("");
                Intent intent = new Intent(IntentActivity.this, IntentResultActivity.class);
                startActivityForResult(intent, 10010);
            }
        });

        findViewById(R.id.button2).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                textView.setText("");
                Intent intent = new Intent(IntentActivity.this, IntentResultActivity.class);
                intent.putExtra("tag", "这是有值跳转");
                startActivityForResult(intent, 10010);
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == 10010 && resultCode == RESULT_OK) {
            String str = data.getStringExtra("tag");
            textView.setText(str);
        }
    }
```
```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_intent_result);

        textView = findViewById(R.id.textView);

        String str = getIntent().getStringExtra("tag");
        if (str != null) {
            textView.setText(str);
        } else {
            textView.setText("");
        }

        findViewById(R.id.button1).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                finish();
            }
        });

        findViewById(R.id.button2).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.putExtra("tag", "这是有值返回");
                setResult(RESULT_OK, intent);
                finish();
            }
        });
    }
```


其他相关的资料可以自行查阅
